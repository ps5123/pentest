# owasp top 2021

## broken access control

account?id=123 变换id能看别人信息



## cryptographic failures

密码故障是指因误用（或未使用）用于保护敏感信息的密码算法而导致的任何漏洞

sqlite数据库

example.db

file example.db

sqlite3 example.db

.tables  看数据库中的表有哪些

PRAGMA table_info(customers);  查看表信息

SELECT * FROM customers;  从表中转储信息

使用在线工具：  Crackstation。这个网站非常擅长破解弱密码哈希。对于更复杂的哈希，我们需要更复杂的工具



## injection

sql injection

command injection

要执行内联命令，只需将它们按照以下格式括起来 $(your_command_here)

比如   $(whoami)    $(uname -a)    $(ps -ef)



## insecure design





## Security misconfiguration

安全配置错误与其他 10 大漏洞不同，因为它们发生在本可以适当配置但未正确配置安全性的情况下。即使您下载了最新的最新软件，糟糕的配置也可能使您的安装容易受到攻击。



安全配置错误包括：

对云服务（如 S3 存储桶）的权限配置不当。
启用不必要的功能，如服务、页面、帐户或权限。
密码未更改的默认帐户。
过于详细的错误消息，使攻击者可以找到有关系统的更多信息。
不使用HTTP 安全标头。



## Vulnerable and Outdated Components

查看网站的插件

exploit

%' or '1'='1



##  Identification and Authentication Failures

身份验证和会话管理构成了现代 Web 应用程序的核心组件。身份验证允许用户通过验证其身份来访问 Web 应用程序。最常见的身份验证形式是使用用户名和密码机制。用户将输入这些凭据，服务器将验证它们。如果用户的浏览器是正确的，则服务器会向用户的浏览器提供一个会话 cookie 。需要会话 cookie，因为 Web 服务器使用无状态的 HTTP(S) 进行通信。附加会话 cookie 意味着服务器将知道谁在发送什么数据。然后服务器可以跟踪用户的操作。 

如果攻击者能够发现身份验证机制中的缺陷，他们可能会成功获得对其他用户帐户的访问权限。这将允许攻击者访问敏感数据（取决于应用程序的目的）。身份验证机制中的一些常见缺陷包括：

暴力攻击：如果 Web 应用程序使用用户名和密码，攻击者可以尝试发起暴力攻击，允许他们使用多次身份验证尝试来猜测用户名和密码。 
使用弱凭证：  Web 应用程序应设置强密码策略。如果应用程序允许用户设置诸如“password1”或普通密码之类的密码，攻击者就可以轻松猜出这些密码并访问用户帐户。
弱会话 Cookie：会话 Cookie 是服务器跟踪用户的方式。如果会话 cookie 包含可预测的值，攻击者可以设置他们自己的会话 cookie 并访问用户的帐户。 
根据确切的缺陷，可以有多种针对损坏的身份验证机制的缓解措施：

为避免密码猜测攻击，请确保应用程序执行强密码策略。 
为避免暴力攻击，请确保应用程序在一定次数的尝试后强制执行自动锁定。这将防止攻击者发起更多的暴力攻击。
实施多重身份验证。如果用户有多种身份验证方法，例如，使用用户名和密码并在其移动设备上接收代码，攻击者将很难同时获得密码和代码来访问帐户。

很多时候，开发人员忘记清理用户在其应用程序代码中提供的输入（用户名和密码），这会使他们容易受到 SQL 注入等攻击。但是，我们将重点关注一个由于开发人员的错误而发生但非常容易被利用的漏洞，即现有用户的重新注册。



有一个名为admin的用户，我们想要访问，那就创建一个也叫admin的用户，但是前面加了一个空格

admin 与（空格）admin  是两个账户但是拥有相同权限，相同技巧可以用在别的账户上。  



## Software and Data Integrity Failures

软件完整性故障

假设使用带有第三方库的网站，这些库保存在无法控制的某些外部服务器中，实际上这样的做法很普遍。

比如常用的javascript库jquery，直接从他们的服务器包含jquey，不用下载

<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>

 https://www.srihash.org/

base64encode 

appdevtools





有一个防御机制保证cookie未被修改，json web tokens （jwt） 

jwt 三个部分  hearder payload signature   ，·前两个部分随意更改，但签名部分涉及服务器持有的密钥。如果不进行签名检查，前面两部分修改alg标头的值和payload就可以通关绕过



## server-side request forgery

一句话木马编写



python2和python3抢pip